#use-added-syntax(jitx)
defpackage spice-import-test:
  import core
  import collections
  import jitx
  import jitx/commands
  import ocdb/defaults
  import ocdb/spice
  import ocdb/generic-components
  

val BOARD-SHAPE = RoundedRectangle(25.0, 25.0, 0.25)
; these must all be lower case
val test_mappings = [des(["r"],            ["case" => "0603"] )
                des(["resmod"], chip-resistor(["case" => "1206"]) )
                des(["u"],           ocdb/st-microelectronics/STM32F031F4P6/component)
                des(["c"], ["case" => get-valid-pkg-list("0201")] )
                des(["m" "pmos"], ocdb/on-semiconductor/FDN352AP/component)]

val one-each-mappings = [ des(["C"], gen-cap-cmp(1.0e-6))
                          des(["R"], gen-res-cmp(1.0e3))
                          des(["U"], pin-header(16, 2)) ]

pcb-module spice:
  ; inst not-empty :  chip-resistor(["case" => "1206"])
  ; property(not-empty.resistance) = 100.0e3
  import-spice-netlist("open-components-database/utils/netdev.cir",true, test_mappings)

; DON'T FORGET TO REMOVE FROM ocdb/stanza.proj
; load "open-components-database/utils/dev-spice.stanza"
make-default-board(spice, 4, BOARD-SHAPE)
view-board()
view-schematic()
