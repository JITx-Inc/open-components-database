#use-added-syntax(jitx)
defpackage spice-import-test:
  import core
  import collections
  import jitx
  import jitx/commands
  import ocdb/defaults
  import ocdb/spice
  import ocdb/generic-components

val BOARD-SHAPE = RoundedRectangle(25.0, 25.0, 0.25)

val test_mappings = [des(["R"], chip-resistor(["resistance" => 1.0e3]) )
                des(["RESMOD"],            chip-resistor(["resistance" => 4.7e3]) )
                des(["U"],           ocdb/st-microelectronics/STM32F031F4P6/component)
                des(["C"], ceramic-cap(["capacitance" => 1.0e-6]))]
  
val one-each-mappings = [ des(["C"], gen-cap-cmp(1.0e-6))
                          des(["R"], gen-res-cmp(1.0e3))
                          des(["U"], pin-header(16, 2)) ]

pcb-module spice:
  inst not-empty :  chip-resistor(["resistance" => 100.0e3])
  import-spice-netlist("open-components-database/utils/netdev.cir",true, test_mappings)

; DON'T FORGET TO REMOVE FROM ocdb/stanza.proj
; load "open-components-database/utils/dev-spice.stanza"
make-default-board(spice, 4, BOARD-SHAPE)
view-board()
view-schematic()
