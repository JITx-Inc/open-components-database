#use-added-syntax(jitx, tests)
defpackage ocdb/tests/landpatterns:
  import core
  import collections
  import jitx
  import jitx/commands
  import ocdb/box-symbol
  import ocdb/defaults
  import ocdb/land-patterns

deftest(ocdb, landpatterns, harness) four-sided-landpattern:
  pcb-pad P:
    val shape_ = RoundedRectangle(1.0 - 0.08, 0.25, 0.25)
    shape = shape_
    type  = SMD
    layer(SolderMask(Top)) = offset(shape_, 0.08)
  pcb-landpattern L:
    name = "Quad Landpattern"
    make-four-sided-landpattern(
      10, ; number of pads on top/bottom
      8,  ; number of pads on left/right sides
      P,  ; the pad definition
      Dims(9.0, 9.0), ; outer dimensions of the part 
      Dims(5.0, 5.0)  ; inner dimensions of the part
    )
  pcb-component Comp:
    assign-landpattern(L)
    make-box-symbol()
  pcb-module Mod:
    inst i: Comp
    place(i) at loc(0.0, 0.0) on Top
  make-default-board(Mod, 2, 10.0, 10.0)
  view-board()
