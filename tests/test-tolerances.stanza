#use-added-syntax(tests)
defpackage ocdb/test/tolerances:
  import core
  import collections
  import ocdb/tolerance

deftest constructors:
  let:
    val tolerance = tol(1.0, 0.25, 0.5)
    println(tolerance)
    #EXPECT(min-value(tolerance) == 0.5)
    #EXPECT(max-value(tolerance) == 1.25)
  let:
    val tolerance = tol%(2.0, 0.5, 0.25)
    println(tolerance)
    #EXPECT(min-value(tolerance) == 1.5)
    #EXPECT(max-value(tolerance) == 3.0)
  let:
    val tolerance = min-typ-max(0.25, 0.5, 1.0)
    println(tolerance)
    #EXPECT(min-value(tolerance) == 0.25)
    #EXPECT(max-value(tolerance) == 1.00)
    #EXPECT(typ(tolerance) == 0.5)
  let:
    val tolerance = tol(1.0, 0.5)
    #EXPECT(min-value(tolerance) == 0.5)
    #EXPECT(max-value(tolerance) == 1.5)
    #EXPECT(center(tolerance) == 1.0)

deftest range: 
  let:
    val tolerance = tol(1.0, 0.25)
    #EXPECT(in-range?(tolerance, 1.15))
    #EXPECT(not in-range?(tolerance, 3.0))
    